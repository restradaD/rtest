var debug=true;if(!window.console){window.console={}}if(!window.console.log){window.console.log=function(){}}var yes=$("#trans-yes").val()||"Yes";var no=$("#trans-no").val()||"No";$(document).ready(function(){var a=$("#wrapper");loadAPPPlugins();a.on("click",".btn-remove",".remove-entity",function(g){g.preventDefault();var f=$(this);var b=f.closest("form.remove-entity");var c=b.attr("action");var i=b.find("input[name=_method]").val();var h=f.data("title")||"Â¿Are you sure?";var d=f.data("description")||"You will not be able to recover this entity.";swal({title:h,text:d,type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:yes,cancelButtonText:no,closeOnConfirm:true,closeOnCancel:true},function(e){if(e){$.ajax({type:i,url:c}).success(function(){reload()}).error(function(){swal("Error","We cannot remove this, try again later.","error")})}})})});function loadAPPPlugins(){openMenuItem();initIChecks();initSelect2();initDataTables();initLaddaLoadingButtons();initDatePicker();initDateTimePicker();initClipBoard();initBootstrapTooltip()}function initBootstrapTooltip(a){a=typeof a!=="undefined"?a:$(document);a.find('[data-toggle="tooltip"]').tooltip()}function openMenuItem(){$("ul.nav-second-level li.active").closest("ul.nav-second-level").addClass("collapse in").closest("li.dropdown").addClass("active")}function initIChecks(a){a=typeof a!=="undefined"?a:$(document);a.find(".i-checks").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"})}function initDataTables(){$(".dataTables-example").DataTable()}function initSelect2(a){a=typeof a!=="undefined"?a:$(document);a.find(".select2").select2({allowClear:true});a.find(".select2-users").select2({allowClear:false,escapeMarkup:function(b){return b},templateResult:function(e){if(e.id===""){return"no user."}var h=$(e.element).attr("data-username");var d=$(e.element).attr("data-email");var g=$(e.element).attr("data-img");var f="&nbsp;&nbsp;"+e.text;var b=$("<span/>");var c=$("<img/>").addClass("img-circle").attr("width","25").attr("height","25").attr("src",g);if(h){b.attr("title","@"+h)}if(g){b.append(c)}b.append(f);return b},templateSelection:function(b){return b.text}})}function initLaddaLoadingButtons(){var a=$(".ladda-button").ladda();a.click(function(){var b=$(this).closest("form")||false;$(this).ladda("start");var c=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;if(b&&!c){setTimeout(function(){b.submit()},100)}})}function initDatePicker(){$(".datepicker").datepicker()}function initDateTimePicker(){$(".datetimepicker").datetimepicker()}function initClipBoard(){new Clipboard(".btn-copy")}function log(a){if(debug){console.trace(a)}}function info(a){if(debug){console.info(a)}}function warn(a){if(debug){console.warn(a)}}function log_error(a){if(debug){console.error(a)}}function timer(a){if(debug){console.time(a)}}function timerEnd(a){if(debug){console.timeEnd(a)}}function truncateString(b,a){if(b!==null){a=typeof a!=="undefined"?a:80;return b.length>a?b.substring(0,a-3)+"...":b}return""}function formatDate(a,b){b=typeof b!=="undefined"?b:"DD.MM.YYYY h:mmA";return moment(a).format(b)}function ago(a){return moment(a).fromNow()}function resetGracefullyTheForm(c,d){c.trigger("reset");var a=c.find("div.form-group");$.each(a,function(e,f){$(f).find("ul.error").remove();$(f).removeClass("has-error")});var b=c.find(".select2");if(b.length>0){b.trigger("change")}if(typeof d!=="undefined"){d()}}function error(a){toastr.error(a)}function status2xx(b,d){var a=b.status;var e=b.statusText;toastr.success(e);if(typeof d!=="undefined"){var c=d.closest("div.modal");c.modal("hide");resetGracefullyTheForm(d)}}function drawInputError(a,c){var b=a.closest("div.form-group");b.find("ul.error").remove();if(typeof c!=="undefined"){b.addClass("has-error");$("<ul/>").addClass("error").appendTo(b);$.each(c,function(e,d){$("<li/>").html(d).appendTo(b.find("ul.error"))})}else{b.removeClass("has-error")}}function handleFormErrors(a){if(typeof a!=="undefined"){toastr.clear();$.each(a,function(b,c){error(c)})}}function status4xx(a,c){var d=JSON.parse(a.responseText);var b=d.recordset.form.children;$.each(b,function(f,h){var g=h.errors;var e=c.find("[name="+f+"]");if(e.length){drawInputError(e,g)}else{handleFormErrors(g)}})}function status5xx(b){var a=b.status;var c=b.statusText;error(a+", "+c)}function handleGracefullyTheResponse(b,d){var a=b.status;var c;if(typeof d!=="undefined"){c=d.find(".ladda-button")}if(a>=200&&a<=299){status2xx(b,d)}else{if(a>=400&&a<=499){status4xx(b,d)}else{if(a>=500&&a<=599){status5xx(b)}}}if(typeof d!=="undefined"){c.ladda("stop")}}function loading(a,b,c){a=typeof a!=="undefined"?a:$("body");b=typeof b!=="undefined"?b:0;c=typeof c!=="undefined"?c:0;a.html($("#loadingTemplate").tmpl()).wrapInner(function(){return"<div style='margin-top: "+b+"px; margin-bottom:"+c+"px;'></div>"})}function removeLoading(a){a=typeof a!=="undefined"?a:$("body");a.empty()}function reload(){window.location.href=window.location.href}(function(a){a.fn.serializeFormJSON=function(){var c={};var b=this.serializeArray();a.each(b,function(){if(c[this.name]){if(!c[this.name].push){c[this.name]=[c[this.name]]}c[this.name].push(this.value||"")}else{c[this.name]=this.value||""}});return c}})(jQuery);toastr.options={closeButton:true,debug:false,progressBar:true,preventDuplicates:true,positionClass:"toast-top-right",onclick:null,showDuration:"400",hideDuration:"1000",timeOut:"7000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};$.blockUI.defaults.message=$("#blockUIMessage");$.fn.modal.Constructor.prototype.enforceFocus=function(){};