(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?a(exports):typeof define==="function"&&define.amd?define(["exports"],a):(a((b.Notify=b.Notify||{})))}(this,function(a){var c=(function(j,g){var h={};for(var f in j){if(g.indexOf(f)>=0){continue}if(!Object.prototype.hasOwnProperty.call(j,f)){continue}h[f]=j[f]}return h});var e=window.Notification;function d(f){return typeof f==="function"}function b(p){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(typeof p!=="string"){throw new Error("Notify(): first arg (title) must be a string.")}if(typeof t!=="object"){throw new Error("Notify(): second arg (options) must be an object.")}var m=t.notifyShow;var i=m===undefined?null:m;var r=t.notifyClose;var k=r===undefined?null:r;var q=t.notifyClick;var l=q===undefined?null:q;var n=t.notifyError;var g=n===undefined?null:n;var h=t.closeOnClick;var s=h===undefined?false:h;var j=t.timeout;var o=j===undefined?null:j;var f=c(t,["notifyShow","notifyClose","notifyClick","notifyError","closeOnClick","timeout"]);this.title=p;this.options=f;this.permission=null;this.closeOnClick=s;this.timeout=o;if(d(i)){this.onShowCallback=i}if(d(k)){this.onCloseCallback=k}if(d(l)){this.onClickCallback=l}if(d(g)){this.onErrorCallback=g}}b.isSupported=function(f){if(!e||!e.requestPermission){return false}if(f==="granted"||e.permission==="granted"){throw new Error("You must only call this before calling Notification.requestPermission(), otherwise this feature detect would trigger an actual notification!")}try{new e("")}catch(g){if(g.name==="TypeError"){return false}}return true};b.needsPermission=e&&e.permission&&e.permission==="granted"?false:true;b.requestPermission=function(g,f){e.requestPermission(function(h){switch(h){case"granted":b.needsPermission=false;if(d(g)){g()}break;case"denied":b.needsPermission=true;if(d(f)){f()}break}})};b.prototype.show=function(){this.myNotify=new e(this.title,this.options);if(!this.options.requireInteraction&&this.timeout&&!isNaN(this.timeout)){setTimeout(this.close.bind(this),this.timeout*1000)}this.myNotify.addEventListener("show",this,false);this.myNotify.addEventListener("error",this,false);this.myNotify.addEventListener("close",this,false);this.myNotify.addEventListener("click",this,false)};b.prototype.onShowNotification=function(f){if(this.onShowCallback){this.onShowCallback(f)}};b.prototype.onCloseNotification=function(f){if(this.onCloseCallback){this.onCloseCallback(f)}this.destroy()};b.prototype.onClickNotification=function(f){if(this.onClickCallback){this.onClickCallback(f)}if(this.closeOnClick){this.close()}};b.prototype.onErrorNotification=function(f){if(this.onErrorCallback){this.onErrorCallback(f)}this.destroy()};b.prototype.destroy=function(){this.myNotify.removeEventListener("show",this,false);this.myNotify.removeEventListener("error",this,false);this.myNotify.removeEventListener("close",this,false);this.myNotify.removeEventListener("click",this,false)};b.prototype.close=function(){this.myNotify.close()};b.prototype.handleEvent=function(f){switch(f.type){case"show":this.onShowNotification(f);break;case"close":this.onCloseNotification(f);break;case"click":this.onClickNotification(f);break;case"error":this.onErrorNotification(f);break}};a["default"]=b}));